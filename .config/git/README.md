# Platform-Specific Git Configuration

This directory contains platform-specific git configuration files that are automatically included in your `.gitconfig`.

## How It Works

The main `.gitconfig` file is **generated by Ansible** using a template (`roles/stow/templates/gitconfig.j2`) that automatically includes the correct platform-specific file based on your system.

When you run `./bootstrap` or `ansible-playbook bootstrap.yml --tags stow`, Ansible:

1. Detects your platform (Linux, macOS, or WSL)
2. Generates `~/.gitconfig` with the appropriate includes
3. Your `.gitconfig` automatically includes:
   - `common.gitconfig` (all platforms)
   - `linux.gitconfig`, `macos.gitconfig`, OR `wsl.gitconfig` (based on platform)
   - `~/.gitconfig.local` (machine-specific, not version controlled)

## Files

### common.gitconfig
Shared git settings for all platforms. Add configuration here that should apply everywhere.

**Examples:**
- Shared git aliases
- Common hooks or tools
- Universal settings

### linux.gitconfig
Native Linux-specific git configuration (excludes WSL).

**Examples:**
```gitconfig
[credential]
    helper = /usr/libexec/git-core/git-credential-libsecret

[diff]
    tool = meld
```

### macos.gitconfig
macOS-specific git configuration.

**Examples:**
```gitconfig
[credential]
    helper = osxkeychain

[diff]
    tool = opendiff
```

### wsl.gitconfig
Windows Subsystem for Linux-specific git configuration.

**Examples:**
```gitconfig
[credential]
    helper = /mnt/c/Program\ Files/Git/mingw64/bin/git-credential-manager.exe

[core]
    autocrlf = input
```

## Local Machine Overrides

For machine-specific git configuration (user info, credentials, work-specific settings):

1. Copy `.gitconfig.local.example` to `~/.gitconfig-local`
2. Add your personal settings
3. This file is automatically included last, overriding earlier settings

Example `~/.gitconfig.local`:
```gitconfig
[user]
    email = "you@example.com"
    name = "Your Name"

[credential "https://github.com"]
    username = "your-username"
```

## Platform Detection Logic

The Ansible template uses these conditions:

```jinja2
{% if ansible_distribution == "MacOSX" %}
    # Include macos.gitconfig
{% elif ansible_kernel is search("microsoft") %}
    # Include wsl.gitconfig
{% elif ansible_system == "Linux" %}
    # Include linux.gitconfig
{% endif %}
```

## Important Notes

- **DO NOT** edit `~/.gitconfig` manually - it's generated by Ansible and will be overwritten
- Platform-specific files (`.config/git/*.gitconfig`) ARE version controlled
- `~/.gitconfig.local` is NOT version controlled (in `.gitignore`)
- Re-run `./bootstrap` or `ansible-playbook bootstrap.yml --tags stow` to regenerate `.gitconfig` after platform file changes
