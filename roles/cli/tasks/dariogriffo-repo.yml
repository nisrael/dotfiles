---
# Dario Griffo's Debian Repository Setup
# This repository provides up-to-date packages for Debian/Ubuntu
# Packages: zig, ghostty, lazygit, yazi, eza, uv, fzf, zoxide, bun, zed, etc.

- name: Download and install griffo.io GPG key (Debian/Ubuntu)
  become: true
  ansible.builtin.shell: |
    curl -fsSL https://debian.griffo.io/EA0F721D231FDD3A0A17B9AC7808B4DD62C41256.asc | gpg --dearmor --output /usr/share/keyrings/debian.griffo.io.gpg
  args:
    creates: /usr/share/keyrings/debian.griffo.io.gpg
  when: ansible_facts.os_family == "Debian"

- name: Add griffo.io repository (Debian/Ubuntu)
  become: true
  ansible.builtin.apt_repository:
    repo: "deb [signed-by=/usr/share/keyrings/debian.griffo.io.gpg] https://debian.griffo.io/apt {{ ansible_facts.distribution_release }} main"
    filename: debian.griffo.io
    state: present
  when: ansible_facts.os_family == "Debian"
